local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = workspace
local Debris = game:GetService("Debris")
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer

repeat task.wait() until LocalPlayer.Character

local BoardLabel =
workspace:WaitForChild("WorkspaceCom")
:WaitForChild("001_OfficeBuildings")
:WaitForChild("OfficeSigns")
:WaitForChild("OfficeSign3")
:WaitForChild("Mod")
:WaitForChild("Frame")
:WaitForChild("TextLabel")

local BoardCount =
workspace.WorkspaceCom["001_OfficeBuildings"]
.OfficeSigns.OfficeSign3.Count

local BoardRemote =
ReplicatedStorage:WaitForChild("RE")
:WaitForChild("1Schoo1lDr1yBoard1s")

local DONOS = {
    ["murilo_12303"] = true,
    ["Apenas_eu362"] = true,
    ["kanakiwhakO"] = true,
}

local p00lXploit = {
    ["p00lkidd78"] = true,
}

local SUB_DONOS = {
    ["olliver2045judoca"] = true,
    ["LyraHubSubdono"] = true,
}

local MODS = {
    ["Thurr_Xploit"] = true,
    ["FgzinZzz"] = true,
    ["w82osjsa"] = true,
    ["Geison006"] = true,
    ["TrollLinux"] = true,
    ["PRODIGYEMDRIFT"] = true,
    ["Rei_SilvaHub9"] = true,
    ["gabriellucaajj"] = true,
    ["ziovxoo"] = true,
    ["eutoleklek_765"] = true,
    ["01Xxx09"] = true,
    ["maginho444"] = true,
    ["Mato9845"] = true,
    ["CGGG_PRJOOOO"] = true,
    ["f905842"] = true,
    ["junio_faeio"] = true,
    ["fh_user1"] = true,
    ["Teuzinn104"] = true,
    ["bargainandreas727"] = true,
    ["Dracius244"] = true,
    ["JxtaCB"] = true,
    ["zorin_pererera"] = true,
    ["torajuiorsudud7"] = true,
    ["SrZombieArgh"] = true,
    ["Xx_Evapsa12"] = true,
    ["pepsi_cocacola705"] = true,
    ["miuuq_333"] = true,
    ["bdhhdjsja"] = true,
    ["cantanguandi2"] = true,
    ["0Pois0"] = true,
    ["Hellointesljw"] = true,
    ["230TOPth"] = true,
    ["fuibanidopor7dia4"] = true,
    ["Vni_Ardengue"] = true,
    ["XxAbrianGZ"] = true,
    ["mygame30303"] = true,
    ["STUMBLE_ENES"] = true,
    ["minatonamikaze090100"] = true,
    ["kaksksjaj05"] = true,
    ["Sae_itoshi109932"] = true,
    ["Berimbau_animal"] = true,
    ["LinuxTrollDev"] = true,
    ["Capotalixo8"] = true,
    ["dididosisidi"] = true,
    ["gjtuyh123"] = true,
    ["alves02249"] = true,
    ["perma_bannn"] = true,
    ["Madara_one68"] = true,
    ["FuseRoX_52"] = true,
    ["eid8dj3"] = true,
    ["dfssfdddfd"] = true,
    ["QueroMais37"] = true,
    ["Goten5099"] = true,
    ["ttyyryjuh"] = true,
    ["Kingstongh90"] = true,
    ["kenilson299"] = true,
    ["enzocria605"] = true,
    ["12hfgjdRc7"] = true,
    ["0_Gomesx"] = true,
    ["pokazuje_jaja"] = true,
    ["jpjaques208"] = true,
}

local TEMP_MODS = {}
local LYRA_USERS = {}
local playerOriginalSpeed = {}
local CASTIGO_PLAYERS = {}
local INVISIBLE_JAILED_PLAYERS = {}
local LOOP_KILL_PLAYERS = {}
local LOOP_BRING_PLAYERS = {}
local LOOP_SIT_PLAYERS = {}
local LOOP_FIRE_PLAYERS = {}
local jaulas = {}
local jailConnections = {}

local function EstaProtegido(playerName)
    return DONOS[playerName] or SUB_DONOS[playerName] or p00lXploit[playerName]
end

local function TemCargo(playerName)
    return DONOS[playerName] or SUB_DONOS[playerName] or p00lXploit[playerName] or MODS[playerName] or TEMP_MODS[playerName] or LYRA_USERS[playerName]
end

local function GetCargo(playerName)
    if DONOS[playerName] then return "Dono do Lyra" end
    if SUB_DONOS[playerName] then return "Subdono do Lyra" end
    if p00lXploit[playerName] then return "Dark Hub" end
    if MODS[playerName] then return "Usuario Admin" end
    if TEMP_MODS[playerName] then return "Temp Mod" end
    return ""
end

local function createSpecialTag(player)
    if not player then return end
    
    local function apply()
        local char = player.Character
        if not char then return end
        local head = char:FindFirstChild("Head")
        if not head then return end

        local old = head:FindFirstChild("SpecialTag")  
        if old then old:Destroy() end  

        local gui = Instance.new("BillboardGui")  
        gui.Name = "SpecialTag"  
        gui.Size = UDim2.new(0, 200, 0, 50)  
        gui.StudsOffset = Vector3.new(0, 3, 0)  
        gui.AlwaysOnTop = true  
        gui.Adornee = head  
        gui.Parent = head  

        local text = Instance.new("TextLabel")  
        text.Size = UDim2.new(1, 0, 1, 0)  
        text.BackgroundTransparency = 1  
        text.Font = Enum.Font.GothamBold  
        text.TextScaled = true  
        text.TextStrokeTransparency = 0.2  
        text.TextStrokeColor3 = Color3.new(0,0,0)  
        
        local cargo = GetCargo(player.Name)
        
        if cargo ~= "" then
            text.Text = cargo
        else
            text.Text = ""
        end
        
        if cargo == "Dono do Lyra" then
            text.TextColor3 = Color3.fromRGB(186, 85, 211)
        elseif cargo == "Subdono do Lyra" then
            text.TextColor3 = Color3.fromRGB(186, 85, 211)
        elseif cargo == "Usuario Admin" then
            text.TextColor3 = Color3.fromRGB(186, 85, 211)
        else
            text.Text = ""
        end

        text.Parent = gui  
    end  

    pcall(apply)  
    player.CharacterAdded:Connect(function()  
        task.wait(0.4)  
        pcall(apply)  
    end)
end

for _, p in pairs(Players:GetPlayers()) do
    createSpecialTag(p)
end

Players.PlayerAdded:Connect(function(p)
    createSpecialTag(p)
end)

local function KickPlayer(targetPlayer, reason)
    if not targetPlayer then return false end
    if EstaProtegido(targetPlayer.Name) then return false end
    
    local success = pcall(function()
        targetPlayer:Kick(reason or "Você foi expulso pela equipe Lyra")
    end)
    
    if not success then
        if targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
            targetPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(0, 1000000, 0)
        end
        
        task.spawn(function()
            for i = 1, 10 do
                if targetPlayer.Character then
                    targetPlayer.Character:BreakJoints()
                end
                task.wait(0.5)
            end
        end)
    end
    
    return true
end

local function KillPlayer(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return false end
    if EstaProtegido(targetPlayer.Name) then return false end
    local humanoid = targetPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.Health = 0
        return true
    end
    return false
end

local function LoopKillPlayer(targetPlayer)
    if not targetPlayer then return false end
    LOOP_KILL_PLAYERS[targetPlayer.Name] = true
    
    task.spawn(function()
        while LOOP_KILL_PLAYERS[targetPlayer.Name] and targetPlayer and targetPlayer.Parent do
            if targetPlayer.Character then
                KillPlayer(targetPlayer)
            end
            task.wait(1)
        end
    end)
    return true
end

local function UnloopKillPlayer(targetPlayer)
    if not targetPlayer then return false end
    LOOP_KILL_PLAYERS[targetPlayer.Name] = nil
    return true
end

local function InvisibleJailPlayer(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return false end
    if EstaProtegido(targetPlayer.Name) then return false end
    
    if INVISIBLE_JAILED_PLAYERS[targetPlayer.Name] then
        local jailData = INVISIBLE_JAILED_PLAYERS[targetPlayer.Name]
        if jailData.jailModel and jailData.jailModel.Parent then
            jailData.jailModel:Destroy()
        end
        if jailData.loop then
            task.cancel(jailData.loop)
        end
    end
    
    local hrp = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return false end
    
    local originalPosition = hrp.Position
    INVISIBLE_JAILED_PLAYERS[targetPlayer.Name] = {
        originalPosition = originalPosition,
        jailModel = nil,
        loop = nil
    }
    
    local jailPosition = hrp.Position
    local jailSize = 8
    
    local jailModel = Instance.new("Model", Workspace)
    jailModel.Name = "InvisibleJail_" .. targetPlayer.Name
    
    local parts = {
        Base = Instance.new("Part", jailModel),
        Roof = Instance.new("Part", jailModel),
        Wall1 = Instance.new("Part", jailModel),
        Wall2 = Instance.new("Part", jailModel),
        Wall3 = Instance.new("Part", jailModel),
        Wall4 = Instance.new("Part", jailModel)
    }
    
    parts.Base.Size = Vector3.new(jailSize, 0.5, jailSize)
    parts.Base.Position = jailPosition - Vector3.new(0, 3, 0)
    parts.Base.Anchored = true
    parts.Base.CanCollide = true
    parts.Base.Material = Enum.Material.Plastic
    parts.Base.Color = Color3.fromRGB(255, 255, 255)
    parts.Base.Transparency = 1
    parts.Base.CastShadow = false
    
    parts.Roof.Size = Vector3.new(jailSize, 0.5, jailSize)
    parts.Roof.Position = parts.Base.Position + Vector3.new(0, jailSize, 0)
    parts.Roof.Anchored = true
    parts.Roof.CanCollide = true
    parts.Roof.Material = Enum.Material.Plastic
    parts.Roof.Color = Color3.fromRGB(255, 255, 255)
    parts.Roof.Transparency = 1
    parts.Roof.CastShadow = false
    
    local wallConfigs = {
        { 
            size = Vector3.new(0.5, jailSize, jailSize),
            position = parts.Base.Position + Vector3.new(jailSize / 2, jailSize / 2, 0)
        },
        { 
            size = Vector3.new(0.5, jailSize, jailSize),
            position = parts.Base.Position + Vector3.new(-jailSize / 2, jailSize / 2, 0)
        },
        { 
            size = Vector3.new(jailSize, jailSize, 0.5),
            position = parts.Base.Position + Vector3.new(0, jailSize / 2, jailSize / 2)
        },
        { 
            size = Vector3.new(jailSize, jailSize, 0.5),
            position = parts.Base.Position + Vector3.new(0, jailSize / 2, -jailSize / 2)
        }
    }
    
    for i, config in ipairs(wallConfigs) do
        local wall = parts["Wall" .. i]
        wall.Size = config.size
        wall.Position = config.position
        wall.Anchored = true
        wall.CanCollide = true
        wall.Material = Enum.Material.Plastic
        wall.Color = Color3.fromRGB(255, 255, 255)
        wall.Transparency = 1
        wall.CastShadow = false
    end
    
    local centerPosition = parts.Base.Position + Vector3.new(0, jailSize / 2, 0)
    hrp.CFrame = CFrame.new(centerPosition)
    
    local monitorLoop = task.spawn(function()
        local center = parts.Base.Position + Vector3.new(0, jailSize / 2, 0)
        while INVISIBLE_JAILED_PLAYERS[targetPlayer.Name] and targetPlayer.Parent and targetPlayer.Character and targetPlayer.Character.Parent do
            local currentHrp = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
            if currentHrp and (currentHrp.Position - center).Magnitude > (jailSize / 2) - 1 then
                currentHrp.CFrame = CFrame.new(center)
            end
            task.wait(0.1)
        end
    end)
    
    INVISIBLE_JAILED_PLAYERS[targetPlayer.Name].jailModel = jailModel
    INVISIBLE_JAILED_PLAYERS[targetPlayer.Name].loop = monitorLoop
    
    return true
end

local function InvisibleUnjailPlayer(targetPlayer)
    if not targetPlayer or not INVISIBLE_JAILED_PLAYERS[targetPlayer.Name] then return false end
    
    local jailData = INVISIBLE_JAILED_PLAYERS[targetPlayer.Name]
    
    if jailData.jailModel and jailData.jailModel.Parent then
        jailData.jailModel:Destroy()
    end
    
    if jailData.loop then
        task.cancel(jailData.loop)
    end
    
    if targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        targetPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(jailData.originalPosition)
    end
    
    INVISIBLE_JAILED_PLAYERS[targetPlayer.Name] = nil
    
    return true
end

local function ExplodirPlayer(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return false end
    if EstaProtegido(targetPlayer.Name) then return false end
    
    local character = targetPlayer.Character
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    
    if not humanoidRootPart then return false end
    
    local explosion = Instance.new("Explosion")
    explosion.Position = humanoidRootPart.Position
    explosion.BlastPressure = 500000
    explosion.BlastRadius = 10
    explosion.DestroyJointRadiusPercent = 0
    explosion.Parent = Workspace
    
    for i = 1, 8 do
        local part = Instance.new("Part")
        part.Size = Vector3.new(2, 2, 2)
        part.Position = humanoidRootPart.Position + Vector3.new(math.random(-8, 8), math.random(0, 12), math.random(-8, 8))
        part.Anchored = false
        part.CanCollide = false
        part.Material = Enum.Material.Neon
        part.Color = Color3.fromRGB(100, 100, 255)
        part.Parent = Workspace
        
        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.Velocity = Vector3.new(math.random(-80, 80), math.random(30, 100), math.random(-80, 80))
        bodyVelocity.MaxForce = Vector3.new(1e5, 1e5, 1e5)
        bodyVelocity.Parent = part
        
        Debris:AddItem(part, 3)
    end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.Health = 0
    end
    
    return true
end

local function BringPlayer(targetPlayer, commander)
    if not targetPlayer or not targetPlayer.Character then return false end
    if not commander or not commander.Character then return false end
    if EstaProtegido(targetPlayer.Name) then return false end
    
    local targetHrp = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
    local commanderHrp = commander.Character:FindFirstChild("HumanoidRootPart")
    
    if not targetHrp or not commanderHrp then return false end
    
    local bringOffset = CFrame.new(0, 0, -5)
    targetHrp.CFrame = commanderHrp.CFrame * bringOffset
    
    return true
end

local function LoopBringPlayer(targetPlayer, commander)
    if not targetPlayer or not commander then return false end
    LOOP_BRING_PLAYERS[targetPlayer.Name] = true
    
    local function bringLoop()
        while LOOP_BRING_PLAYERS[targetPlayer.Name] and targetPlayer and targetPlayer.Parent and commander and commander.Parent do
            if targetPlayer.Character and commander.Character then
                local targetHrp = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
                local commanderHrp = commander.Character:FindFirstChild("HumanoidRootPart")
                
                if targetHrp and commanderHrp then
                    local bringOffset = CFrame.new(0, 0, -5)
                    targetHrp.CFrame = commanderHrp.CFrame * bringOffset
                end
            end
            task.wait(0.5)
        end
    end
    
    task.spawn(bringLoop)
    return true
end

local function UnloopBringPlayer(targetPlayer)
    if not targetPlayer then return false end
    LOOP_BRING_PLAYERS[targetPlayer.Name] = nil
    return true
end

local function TPTrollPlayer(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return false end
    if EstaProtegido(targetPlayer.Name) then return false end
    local hrp = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return false end
    
    local originalPosition = hrp.Position
    
    local trollPosition = Vector3.new(799, -9, 482)
    hrp.CFrame = CFrame.new(trollPosition)
    
    task.delay(3, function()
        if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
            targetPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(originalPosition)
        end
    end)
    
    return true
end

local function FloatPlayer(targetPlayer)
    if not targetPlayer or not targetPlayer.Character or not targetPlayer.Character:FindFirstChild("HumanoidRootPart") or not targetPlayer.Character:FindFirstChildOfClass("Humanoid") then return false end
    if EstaProtegido(targetPlayer.Name) then return false end
    local targetHrp = targetPlayer.Character.HumanoidRootPart
    local targetHumanoid = targetPlayer.Character:FindFirstChildOfClass("Humanoid")
    local targetPos = targetHrp.Position
    targetHumanoid.WalkSpeed = 0
    targetHumanoid.JumpHeight = 0

    local bodyVelocity = Instance.new("BodyVelocity", targetHrp)
    bodyVelocity.MaxForce = Vector3.new(0, math.huge, 0)
    bodyVelocity.Velocity = Vector3.new(0, 10, 0)
    bodyVelocity.Name = "FloatVelocity"

    local maxHeight = targetPos.Y + 50
    local connection
    connection = RunService.Heartbeat:Connect(function()
        if not targetPlayer.Character or not targetPlayer.Character.Parent or not targetHrp.Parent or not targetHumanoid.Parent then
            if bodyVelocity and bodyVelocity.Parent then bodyVelocity:Destroy() end
            if connection then connection:Disconnect() end
            return
        end
        if targetHrp.Position.Y >= maxHeight then
            if bodyVelocity and bodyVelocity.Parent then bodyVelocity:Destroy() end
            if connection then connection:Disconnect() end
            targetHumanoid.Health = 0
        end
    end)
    return true
end

local function LagPlayer(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return false end
    if EstaProtegido(targetPlayer.Name) then return false end
    
    for i = 1, 50 do
        task.spawn(function()
            pcall(function()
                local hrp = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
                if hrp then
                    local explosion = Instance.new("Explosion")
                    explosion.Position = hrp.Position + Vector3.new(math.random(-10, 10), math.random(0, 5), math.random(-10, 10))
                    explosion.BlastRadius = 20
                    explosion.BlastPressure = 1000000
                    explosion.Parent = Workspace
                end
            end)
        end)
    end
    
    for i = 1, 25 do
        task.spawn(function()
            local part = Instance.new("Part")
            part.Size = Vector3.new(5, 5, 5)
            part.Position = targetPlayer.Character.HumanoidRootPart.Position + Vector3.new(math.random(-20, 20), math.random(0, 10), math.random(-20, 20))
            part.Anchored = false
            part.CanCollide = true
            part.Material = Enum.Material.Neon
            part.Color = Color3.fromRGB(255, 0, 0)
            part.Parent = Workspace
            
            local bodyVelocity = Instance.new("BodyVelocity")
            bodyVelocity.Velocity = Vector3.new(math.random(-100, 100), math.random(50, 200), math.random(-100, 100))
            bodyVelocity.MaxForce = Vector3.new(1e6, 1e6, 1e6)
            bodyVelocity.Parent = part
            
            Debris:AddItem(part, 5)
        end)
    end
    
    return true
end

local function CastigoPlayer(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return false end
    if EstaProtegido(targetPlayer.Name) then return false end
    
    if CASTIGO_PLAYERS[targetPlayer.Name] then
        local castigoData = CASTIGO_PLAYERS[targetPlayer.Name]
        if castigoData.jailModel and castigoData.jailModel.Parent then
            castigoData.jailModel:Destroy()
        end
        if castigoData.loop then
            task.cancel(castigoData.loop)
        end
    end
    
    local hrp = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return false end
    
    local originalPosition = hrp.Position
    CASTIGO_PLAYERS[targetPlayer.Name] = {
        originalPosition = originalPosition,
        jailModel = nil,
        loop = nil
    }
    
    local castigoPosition = Vector3.new(1159, 1727, 421)
    local jailSize = 12
    
    local jailModel = Instance.new("Model", Workspace)
    jailModel.Name = "Castigo_" .. targetPlayer.Name
    
    local parts = {
        Base = Instance.new("Part", jailModel),
        Roof = Instance.new("Part", jailModel),
        Wall1 = Instance.new("Part", jailModel),
        Wall2 = Instance.new("Part", jailModel),
        Wall3 = Instance.new("Part", jailModel),
        Wall4 = Instance.new("Part", jailModel)
    }
    
    parts.Base.Size = Vector3.new(jailSize, 0.5, jailSize)
    parts.Base.Position = castigoPosition - Vector3.new(0, 3, 0)
    parts.Base.Anchored = true
    parts.Base.CanCollide = true
    parts.Base.Material = Enum.Material.Neon
    parts.Base.Color = Color3.fromRGB(186, 85, 211)
    parts.Base.Transparency = 0.3
    
    parts.Roof.Size = Vector3.new(jailSize, 0.5, jailSize)
    parts.Roof.Position = parts.Base.Position + Vector3.new(0, jailSize, 0)
    parts.Roof.Anchored = true
    parts.Roof.CanCollide = true
    parts.Roof.Material = Enum.Material.Neon
    parts.Roof.Color = Color3.fromRGB(186, 85, 211)
    parts.Roof.Transparency = 0.3
    
    local wallConfigs = {
        {
            size = Vector3.new(0.5, jailSize, jailSize),
            position = parts.Base.Position + Vector3.new(jailSize / 2, jailSize / 2, 0)
        },
        {
            size = Vector3.new(0.5, jailSize, jailSize),
            position = parts.Base.Position + Vector3.new(-jailSize / 2, jailSize / 2, 0)
        },
        {
            size = Vector3.new(jailSize, jailSize, 0.5),
            position = parts.Base.Position + Vector3.new(0, jailSize / 2, jailSize / 2)
        },
        {
            size = Vector3.new(jailSize, jailSize, 0.5),
            position = parts.Base.Position + Vector3.new(0, jailSize / 2, -jailSize / 2)
        }
    }
    
    for i, config in ipairs(wallConfigs) do
        local wall = parts["Wall" .. i]
        wall.Size = config.size
        wall.Position = config.position
        wall.Anchored = true
        wall.CanCollide = true
        wall.Material = Enum.Material.Neon
        wall.Color = Color3.fromRGB(186, 85, 211)
        wall.Transparency = 0.3
    end
    
    local imageId = "rbxassetid://7409940017"
    
    for partName, part in pairs(parts) do
        local faces = {
            Enum.NormalId.Front,
            Enum.NormalId.Back,
            Enum.NormalId.Left,
            Enum.NormalId.Right,
            Enum.NormalId.Top,
            Enum.NormalId.Bottom
        }
        
        for _, face in ipairs(faces) do
            local decal = Instance.new("Decal", part)
            decal.Face = face
            decal.Texture = imageId
            decal.Transparency = 0.1
        end
        
        part.Material = Enum.Material.Plastic
        part.Color = Color3.fromRGB(255, 255, 255)
    end
    
    local centerPosition = parts.Base.Position + Vector3.new(0, jailSize / 2, 0)
    hrp.CFrame = CFrame.new(centerPosition)
    
    local monitorLoop = task.spawn(function()
        local center = parts.Base.Position + Vector3.new(0, jailSize / 2, 0)
        while CASTIGO_PLAYERS[targetPlayer.Name] and targetPlayer.Parent and targetPlayer.Character and targetPlayer.Character.Parent do
            local currentHrp = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
            if currentHrp and (currentHrp.Position - center).Magnitude > (jailSize / 2) - 1 then
                currentHrp.CFrame = CFrame.new(center)
            end
            task.wait(0.1)
        end
    end)
    
    CASTIGO_PLAYERS[targetPlayer.Name].jailModel = jailModel
    CASTIGO_PLAYERS[targetPlayer.Name].loop = monitorLoop
    
    return true
end

local function DescastigoPlayer(targetPlayer)
    if not targetPlayer or not CASTIGO_PLAYERS[targetPlayer.Name] then return false end
    
    local castigoData = CASTIGO_PLAYERS[targetPlayer.Name]
    
    if castigoData.jailModel and castigoData.jailModel.Parent then
        castigoData.jailModel:Destroy()
    end
    
    if castigoData.loop then
        task.cancel(castigoData.loop)
    end
    
    if targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        targetPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(castigoData.originalPosition)
    end
    
    CASTIGO_PLAYERS[targetPlayer.Name] = nil
    
    return true
end

local function CriarJumpscareLocal(imageId, audioId)
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "JumpscareFullscreen"
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Global
    screenGui.DisplayOrder = 2147483647
    screenGui.ResetOnSpawn = false
    screenGui.IgnoreGuiInset = true
    screenGui.Parent = CoreGui

    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(1, 0, 1, 0)
    mainFrame.Position = UDim2.new(0, 0, 0, 0)
    mainFrame.BackgroundColor3 = Color3.new(0, 0, 0)
    mainFrame.BorderSizePixel = 0
    mainFrame.ZIndex = 2147483647
    mainFrame.Parent = screenGui

    local imageLabel = Instance.new("ImageLabel")
    imageLabel.Size = UDim2.new(1, 0, 1, 0)
    imageLabel.Position = UDim2.new(0, 0, 0, 0)
    imageLabel.BackgroundTransparency = 1
    imageLabel.Image = imageId
    imageLabel.ScaleType = Enum.ScaleType.Fit
    imageLabel.ZIndex = 2147483647
    imageLabel.Parent = mainFrame

    local sound = Instance.new("Sound")
    sound.SoundId = audioId
    sound.Volume = 2.0
    sound.Looped = false
    sound.Parent = mainFrame

    local flashCount = 12
    local flashInterval = 0.1

    sound:Play()
    UserInputService.MouseIconEnabled = false

    task.spawn(function()
        for i = 1, flashCount do
            if not screenGui.Parent then break end
            imageLabel.ImageTransparency = (i % 2 == 0) and 0.1 or 0
            task.wait(flashInterval)
        end
        
        imageLabel.ImageTransparency = 0
        task.wait(0.8)
        
        local fadeTween = TweenService:Create(imageLabel, TweenInfo.new(1.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            ImageTransparency = 1
        })
        fadeTween:Play()
        
        local bgFadeTween = TweenService:Create(mainFrame, TweenInfo.new(1.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 1
        })
        bgFadeTween:Play()
        
        task.wait(2)
        UserInputService.MouseIconEnabled = true
        screenGui:Destroy()
    end)

    return true
end

local function TheRakeJumpscare()
    local SoundService = game:GetService("SoundService")
    
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "FullJumpscare"
    screenGui.IgnoreGuiInset = true
    screenGui.ResetOnSpawn = false
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.DisplayOrder = 999999
    screenGui.Parent = CoreGui
    
    local imageLabel = Instance.new("ImageLabel")
    imageLabel.Size = UDim2.new(1.2, 0, 1.2, 0)
    imageLabel.Position = UDim2.new(-0.1, 0, -0.1, 0)
    imageLabel.BackgroundTransparency = 1
    imageLabel.Image = "rbxassetid://108753859505348"
    imageLabel.ZIndex = 999999
    imageLabel.Parent = screenGui
    
    local sound1 = Instance.new("Sound")
    sound1.SoundId = "rbxassetid://18967004856"
    sound1.Volume = 10
    sound1.Parent = SoundService
    
    local sound2 = Instance.new("Sound")
    sound2.SoundId = "rbxassetid://103396125105301"
    sound2.Volume = 10
    sound2.Parent = SoundService
    
    local isShaking = true
    
    task.spawn(function()
        while isShaking do
            local offsetX = math.random(-10, 10)
            local offsetY = math.random(-10, 10)
            imageLabel.Position = UDim2.new(-0.1, offsetX, -0.1, offsetY)
            task.wait(0.02)
        end
    end)
    
    imageLabel.Visible = true
    sound1:Play()
    
    task.delay(2, function()
        sound2:Play()
        sound2.Ended:Connect(function()
            isShaking = false
            screenGui:Destroy()
        end)
    end)
end

local function TeleportToBackrooms()
    local backroomsModel = game:GetObjects("rbxassetid://10581711055")[1]
    backroomsModel.Parent = workspace
    
    for _, descendant in pairs(backroomsModel:GetDescendants()) do
        if descendant:IsA("BasePart") then
            descendant.Position = descendant.Position + Vector3.new(99999, 99999, 99999)
        end
    end
    
    local player = LocalPlayer
    if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local targetPosition = backroomsModel.PrimaryPart.Position
        player.Character.HumanoidRootPart.CFrame = CFrame.new(targetPosition.X, targetPosition.Y + 90, targetPosition.Z)
        task.wait(2)
        player.Character.HumanoidRootPart.CFrame = CFrame.new(targetPosition.X, targetPosition.Y + 90, targetPosition.Z)
    end
end

local function SitPlayer(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return false end
    if EstaProtegido(targetPlayer.Name) then return false end
    local humanoid = targetPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.Sit = true
        return true
    end
    return false
end

local function LoopSitPlayer(targetPlayer)
    if not targetPlayer then return false end
    LOOP_SIT_PLAYERS[targetPlayer.Name] = true
    
    local function sitLoop()
        while LOOP_SIT_PLAYERS[targetPlayer.Name] and targetPlayer and targetPlayer.Parent do
            if targetPlayer.Character then
                local humanoid = targetPlayer.Character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid.Sit = true
                end
            end
            task.wait(0.5)
        end
    end
    
    task.spawn(sitLoop)
    return true
end

local function UnloopSitPlayer(targetPlayer)
    if not targetPlayer then return false end
    LOOP_SIT_PLAYERS[targetPlayer.Name] = nil
    return true
end

local function FirePlayer(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return false end
    if EstaProtegido(targetPlayer.Name) then return false end
    local humanoid = targetPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        local fire = Instance.new("Fire")
        fire.Parent = targetPlayer.Character:FindFirstChild("HumanoidRootPart") or targetPlayer.Character:FindFirstChild("Torso") or targetPlayer.Character:FindFirstChildWhichIsA("BasePart")
        humanoid:TakeDamage(100)
        return true
    end
    return false
end

local function LoopFirePlayer(targetPlayer)
    if not targetPlayer then return false end
    LOOP_FIRE_PLAYERS[targetPlayer.Name] = true
    
    local function fireLoop()
        while LOOP_FIRE_PLAYERS[targetPlayer.Name] and targetPlayer and targetPlayer.Parent do
            if targetPlayer.Character then
                FirePlayer(targetPlayer)
            end
            task.wait(1)
        end
    end
    
    task.spawn(fireLoop)
    return true
end

local function UnloopFirePlayer(targetPlayer)
    if not targetPlayer then return false end
    LOOP_FIRE_PLAYERS[targetPlayer.Name] = nil
    return true
end

local function TransformIntoGoner()
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    
    ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("ChangeCharacterBody"):InvokeServer(unpack({
        {
            116253341067642,
            110703630520331,
            119263803737569,
            99234191703566,
            99948897896884,
            0
        }
    }))
    
    wait(3)
    
    local player = game.Players.LocalPlayer
    local humanoid = (player.Character or player.CharacterAdded:Wait()):WaitForChild("Humanoid")
    
    local animation = Instance.new("Animation")
    animation.AnimationId = "rbxassetid://4686925579"
    humanoid:LoadAnimation(animation):Play()
    
    humanoid.WalkSpeed = 0
    
    wait(2)
    
    local function ApplyGonerAppearance()
        local wearRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Wear")
        
        for _, accessory in ipairs(humanoid:GetAppliedDescription():GetAccessories(true)) do
            if accessory.AssetId then
                wearRemote:InvokeServer(unpack({tonumber(accessory.AssetId)}))
            end
        end
        
        task.wait()
        
        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Wear"):InvokeServer(unpack({17771175724}))
        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Wear"):InvokeServer(unpack({17822722698}))
        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Wear"):InvokeServer(unpack({17822749561}))
        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Wear"):InvokeServer(unpack({17772174303}))
        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Wear"):InvokeServer(unpack({17770317484}))
        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Wear"):InvokeServer(unpack({4586060885}))
        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Wear"):InvokeServer(unpack({6913613757}))
        
        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("ChangeBodyColor"):FireServer(unpack({"Really black"}))
        
        wait(0.1)
        ReplicatedStorage.Remotes.ApplyEmmiter:InvokeServer(18635845425, "087SmokeBlack")
    end
    
    wait(0.1)
    
    local backpack = game.Players.LocalPlayer.Backpack
    local character = game.Players.LocalPlayer.Character or game.Players.LocalPlayer.CharacterAdded:Wait()
    
    local punchTool = Instance.new("Tool")
    punchTool.Name = "Soco"
    punchTool.RequiresHandle = true
    punchTool.CanBeDropped = false
    punchTool.Parent = backpack
    
    local handle = Instance.new("Part")
    handle.Name = "Handle"
    handle.Size = Vector3.new(1, 1, 1)
    handle.Transparency = 1
    handle.CanCollide = false
    handle.Anchored = false
    handle.Parent = punchTool
    
    punchTool.Equipped:Connect(function()
        punchTool.Activated:Connect(function()
            local characterHumanoid = character:FindFirstChildOfClass("Humanoid")
            if not characterHumanoid then return end
            
            local animator = characterHumanoid:FindFirstChild("Animator")
            if not animator then
                animator = Instance.new("Animator")
                animator.Parent = characterHumanoid
            end
            
            local punchAnimation = Instance.new("Animation")
            punchAnimation.AnimationId = "rbxassetid://846744780"
            
            local animationTrack = animator:LoadAnimation(punchAnimation)
            animationTrack.Looped = false
            animationTrack:Play()
        end)
    end)
    
    local soundTools = {
        {name = "Som 1", soundId = 2291326370},
        {name = "Som 2", soundId = 2316600989},
        {name = "Som 3", soundId = 2316601464},
        {name = "Som 4", soundId = 2291325961},
        {name = "Som 5", soundId = 2290634374},
        {name = "Som 6", soundId = 2737898305},
        {name = "Som 7", soundId = 2291326656}
    }
    
    for _, soundData in ipairs(soundTools) do
        local soundTool = Instance.new("Tool")
        soundTool.Name = soundData.name
        soundTool.RequiresHandle = false
        soundTool.Parent = backpack
    
        soundTool.Equipped:Connect(function()
            ReplicatedStorage.RE:FindFirstChild("1Gu1nSound1s"):FireServer(unpack({
                workspace,
                soundData.soundId,
                1
            }))
            
            local sound = Instance.new("Sound")
            sound.SoundId = "rbxassetid://" .. soundData.soundId
            sound.Parent = workspace
            sound.Volume = 0.3
            sound.PlaybackSpeed = 1
            sound:Play()
            
            game:GetService("Debris"):AddItem(sound, 3)
        end)
    end
    
    ApplyGonerAppearance()
    
    wait(1)
    
    local resetHumanoid = (player.Character or player.CharacterAdded:Wait()):WaitForChild("Humanoid")
    
    for _, track in pairs(resetHumanoid:GetPlayingAnimationTracks()) do
        track:Stop()
    end
    
    resetHumanoid.WalkSpeed = 16
    
    wait(0.1)
    
    game.Players.LocalPlayer.CharacterAdded:Connect(function(newCharacter)
        local newHumanoid = newCharacter:WaitForChild("Humanoid")
        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("ResetCharacterAppearance"):FireServer()
        ReplicatedStorage.Remotes.ApplyEmmiter:InvokeServer(unpack({18610639786, "0001Remove"}))
    end)
    
    task.wait()
    loadstring(game:HttpGet("https://github.com/contateste8/R6Convert/raw/refs/heads/main/R6Converter.txt"))()
end

local function FloppaRain()
    local sky = Instance.new("Sky")
    sky.SkyboxBk = "rbxassetid://123446364161879"
    sky.SkyboxDn = "rbxassetid://123446364161879"
    sky.SkyboxFt = "rbxassetid://123446364161879"
    sky.SkyboxLf = "rbxassetid://123446364161879"
    sky.SkyboxRt = "rbxassetid://123446364161879"
    sky.SkyboxUp = "rbxassetid://123446364161879"
    sky.Parent = game.Lighting
    
    local function PlayLoopingSound()
        local sound = Instance.new("Sound")
        sound.SoundId = "rbxassetid://8772968188"
        sound.Volume = 1
        sound.Parent = workspace
        
        while true do
            sound:Play()
            task.wait(5)
        end
    end
    
    task.spawn(PlayLoopingSound)
    
    task.wait(1)
    
    local floppaTemplate = Instance.new("Part")
    floppaTemplate.Size = Vector3.new(2, 2, 2)
    floppaTemplate.Anchored = false
    floppaTemplate.CanCollide = true
    
    local textureId = "rbxassetid://123446364161879"
    local spawnHeight = 100
    local spawnInterval = 0.05
    local spawnArea = 500
    local floppasPerSpawn = 10
    
    local function ApplyFloppaTexture(part)
        for _, faceName in pairs({"Front", "Back", "Left", "Right", "Top", "Bottom"}) do
            local decal = Instance.new("Decal")
            decal.Texture = textureId
            decal.Face = Enum.NormalId[faceName]
            decal.Parent = part
        end
    end
    
    local function OnFloppaTouch(part)
        part.Touched:Connect(function(hit)
            local humanoid = hit.Parent:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid:TakeDamage(10)
            end
        end)
    end
    
    local function SpawnFloppas()
        for i = 1, floppasPerSpawn do
            local floppa = floppaTemplate:Clone()
            floppa.Position = Vector3.new(
                math.random(-spawnArea / 2, spawnArea / 2),
                spawnHeight,
                math.random(-spawnArea / 2, spawnArea / 2)
            )
            ApplyFloppaTexture(floppa)
            OnFloppaTouch(floppa)
            floppa.Parent = workspace
        end
    end
    
    while true do
        SpawnFloppas()
        task.wait(spawnInterval)
    end
end

local function ProcessarComando(texto)
    if not texto or texto == "" then return end

    local comando = texto:lower()
    local alvo = LocalPlayer.Name:lower()
    local char = LocalPlayer.Character
    local humanoid = char and char:FindFirstChildOfClass("Humanoid")
    
    if comando:match(";kick%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            LocalPlayer:Kick("Você foi kickado pelo Lyra Hub Admin")
        end
    end
    
    if comando:match(";kill%s+" .. alvo) then  
        if not EstaProtegido(LocalPlayer.Name) then
            if char then char:BreakJoints() end
        end
    end

    if comando:match(";loopkill%s+" .. alvo) then  
        if not EstaProtegido(LocalPlayer.Name) then
            LoopKillPlayer(LocalPlayer)
        end
    end

    if comando:match(";unloopkill%s+" .. alvo) then  
        UnloopKillPlayer(LocalPlayer)
    end

    if comando:match(";fling%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            if char then
                local root = char:FindFirstChild("HumanoidRootPart")
                if root then
                    TweenService:Create(
                        root,
                        TweenInfo.new(1),
                        {CFrame = CFrame.new(0,100000,0)}
                    ):Play()
                end
            end
        end
    end

    if comando:match(";backrooms%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            local mapID = 10581711055
            local mapa = game:GetObjects("rbxassetid://"..mapID)[1]
            if mapa then
                mapa.Parent = Workspace
                mapa.PrimaryPart = mapa.PrimaryPart or mapa:FindFirstChildWhichIsA("BasePart")
                if mapa.PrimaryPart then
                    mapa:SetPrimaryPartCFrame(CFrame.new(0,10000,0))
                end
            end
            if char and char:FindFirstChild("HumanoidRootPart") then
                char:MoveTo(Vector3.new(59,9996,19))
            end
        end
    end

    if comando:match(";freeze%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            if humanoid then
                playerOriginalSpeed[alvo] = humanoid.WalkSpeed
                humanoid.WalkSpeed = 0
            end
        end
    end

    if comando:match(";unfreeze%s+" .. alvo) then
        if humanoid then
            humanoid.WalkSpeed = playerOriginalSpeed[alvo] or 16
        end
    end

    if comando:match(";jail%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            if char then
                local root = char:FindFirstChild("HumanoidRootPart")
                if root then
                    local pos = root.Position
                    jaulas[alvo] = {}

                    local function criar(cf, s)
                        local p = Instance.new("Part")
                        p.Anchored = true
                        p.Transparency = 0.5
                        p.Color = Color3.fromRGB(128, 0, 255)
                        p.Size = s
                        p.CFrame = cf
                        p.Parent = Workspace
                        table.insert(jaulas[alvo], p)
                    end

                    criar(CFrame.new(pos + Vector3.new(5,0,0)), Vector3.new(1,10,10))
                    criar(CFrame.new(pos + Vector3.new(-5,0,0)), Vector3.new(1,10,10))
                    criar(CFrame.new(pos + Vector3.new(0,0,5)), Vector3.new(10,10,1))
                    criar(CFrame.new(pos + Vector3.new(0,0,-5)), Vector3.new(10,10,1))
                    criar(CFrame.new(pos + Vector3.new(0,5,0)), Vector3.new(10,1,10))
                    criar(CFrame.new(pos + Vector3.new(0,-5,0)), Vector3.new(10,1,10))

                    if jailConnections[alvo] then
                        jailConnections[alvo]:Disconnect()
                    end

                    jailConnections[alvo] = RunService.Heartbeat:Connect(function()
                        if root and (root.Position - pos).Magnitude > 5 then
                            root.CFrame = CFrame.new(pos)
                        end
                    end)
                end
            end
        end
    end

    if comando:match(";unjail%s+" .. alvo) then
        if jaulas[alvo] then
            for _, p in ipairs(jaulas[alvo]) do
                pcall(function() p:Destroy() end)
            end
            jaulas[alvo] = nil
        end
        if jailConnections[alvo] then
            jailConnections[alvo]:Disconnect()
            jailConnections[alvo] = nil
        end
    end

    if comando:match(";jail invisible%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            InvisibleJailPlayer(LocalPlayer)
        end
    end
    
    if comando:match(";unjail invisible%s+" .. alvo) then
        InvisibleUnjailPlayer(LocalPlayer)
    end
    
    if comando:match(";explode%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            ExplodirPlayer(LocalPlayer)
        end
    end
    
    if comando:match(";loopbring%s+" .. alvo) then
    end
    
    if comando:match(";unloopbring%s+" .. alvo) then
        UnloopBringPlayer(LocalPlayer)
    end
    
    if comando:match(";tptroll%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            TPTrollPlayer(LocalPlayer)
        end
    end
    
    if comando:match(";float%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            FloatPlayer(LocalPlayer)
        end
    end
    
    if comando:match(";lag%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            LagPlayer(LocalPlayer)
        end
    end
    
    if comando:match(";castigo%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            CastigoPlayer(LocalPlayer)
        end
    end
    
    if comando:match(";descastigo%s+" .. alvo) then
        DescastigoPlayer(LocalPlayer)
    end
    
    if comando:match(";jumps1%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            CriarJumpscareLocal("rbxassetid://126754882337711", "rbxassetid://138873214826309")
        end
    end
    
    if comando:match(";jumps2%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            CriarJumpscareLocal("rbxassetid://86379969987314", "rbxassetid://143942090")
        end
    end
    
    if comando:match(";jumps3%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            CriarJumpscareLocal("rbxassetid://127382022168206", "rbxassetid://143942090")
        end
    end
    
    if comando:match(";jumps4%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            CriarJumpscareLocal("rbxassetid://95973611964555", "rbxassetid://138873214826309")
        end
    end
    
    if comando:match(";therakejumpscare%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            TheRakeJumpscare()
        end
    end
    
    if comando:match(";sit%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            SitPlayer(LocalPlayer)
        end
    end
    
    if comando:match(";loopsit%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            LoopSitPlayer(LocalPlayer)
        end
    end
    
    if comando:match(";unloopsit%s+" .. alvo) then
        UnloopSitPlayer(LocalPlayer)
    end
    
    if comando:match(";fire%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            FirePlayer(LocalPlayer)
        end
    end
    
    if comando:match(";loopfire%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            LoopFirePlayer(LocalPlayer)
        end
    end
    
    if comando:match(";unloopfire%s+" .. alvo) then
        UnloopFirePlayer(LocalPlayer)
    end
    
    if comando:match(";goner%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            TransformIntoGoner()
        end
    end
    
    if comando:match(";flopparain%s+" .. alvo) then
        if not EstaProtegido(LocalPlayer.Name) then
            FloppaRain()
        end
    end

    if comando == ";verifique" then
        ReplicatedStorage.RE["1Too1l"]:InvokeServer("PickingTools","LaundryBasket")

        task.delay(0.5, function()
            for _, player in ipairs(Players:GetPlayers()) do
                local function possuiLaundry()
                    return (player.Backpack and player.Backpack:FindFirstChild("LaundryBasket"))
                        or (player.Character and player.Character:FindFirstChild("LaundryBasket"))
                end

                if possuiLaundry() and player.Character then
                    local head = player.Character:FindFirstChild("Head")
                    if head then
                        local old = head:FindFirstChild("NytheruneTag")
                        if old then old:Destroy() end

                        local gui = Instance.new("BillboardGui")
                        gui.Name = "NytheruneTag"
                        gui.Size = UDim2.new(0,240,0,50)
                        gui.StudsOffset = Vector3.new(0,3.5,0)
                        gui.AlwaysOnTop = true
                        gui.Adornee = head
                        gui.Parent = head

                        local text = Instance.new("TextLabel")
                        text.Size = UDim2.new(1,0,1,0)
                        text.BackgroundTransparency = 1
                        text.Font = Enum.Font.GothamBold
                        text.TextScaled = true
                        text.TextStrokeTransparency = 0.2
                        text.TextStrokeColor3 = Color3.new(0,0,0)
                        text.TextColor3 = Color3.fromRGB(0,255,170)
                        text.Text = "Usuário Lyra"
                        text.Parent = gui
                    end
                end
            end
        end)
    end
end

BoardLabel:GetPropertyChangedSignal("Text"):Connect(function()
    ProcessarComando(BoardLabel.Text)
end)

LYRA_USERS[LocalPlayer.Name] = true

if not TemCargo(LocalPlayer.Name) then
    return
end

local WindUI
local success, err = pcall(function()
    WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Frost230/Embee/refs/heads/main/Wind%20Ui"))()
end)

if not success or not WindUI then
    return
end

task.wait(0.5)

WindUI:AddTheme({
   Name = "Ultra Glass V2",
Background = Color3.fromRGB(0, 0, 0),
WindowBackground = Color3.fromRGB(0, 0, 0),
DialogBackground = Color3.fromRGB(10, 10, 10),
TabBackground = Color3.fromRGB(10, 10, 10),
ElementBackground = Color3.fromRGB(15, 15, 15),
PopupBackground = Color3.fromRGB(10, 10, 10),
Accent = Color3.fromRGB(106, 13, 173),
Outline = Color3.fromRGB(106, 13, 173),
Text = Color3.fromRGB(255, 255, 255),
Placeholder = Color3.fromRGB(150, 150, 150),
Button = Color3.fromRGB(106, 13, 173),
Icon = Color3.fromRGB(106, 13, 173),
BackgroundTransparency = 0.25,
DialogBackgroundTransparency = 0.35,
PopupBackgroundTransparency = 0.35,
Hover = Color3.fromRGB(131, 38, 198),
WindowShadow = Color3.fromRGB(0, 0, 0),
DialogTitle = Color3.fromRGB(255, 255, 255),
DialogContent = Color3.fromRGB(220, 220, 220),
DialogIcon = Color3.fromRGB(106, 13, 173),
WindowTopbarButtonIcon = Color3.fromRGB(106, 13, 173),
WindowTopbarTitle = Color3.fromRGB(255, 255, 255),
WindowTopbarAuthor = Color3.fromRGB(180, 180, 180),
WindowTopbarIcon = Color3.fromRGB(106, 13, 173),
TabTitle = Color3.fromRGB(255, 255, 255),
TabIcon = Color3.fromRGB(106, 13, 173),
ElementTitle = Color3.fromRGB(255, 255, 255),
ElementDesc = Color3.fromRGB(200, 200, 200),
ElementIcon = Color3.fromRGB(106, 13, 173),
DialogButton = Color3.fromRGB(106, 13, 173),
DialogButtonText = Color3.fromRGB(255, 255, 255),
DialogButtonHover = Color3.fromRGB(131, 38, 198),
PopupButton = Color3.fromRGB(106, 13, 173),
PopupButtonText = Color3.fromRGB(255, 255, 255),
PopupButtonHover = Color3.fromRGB(131, 38, 198),
})

WindUI:SetTheme("Ultra Glass V2")

local Avatar = Players:GetUserThumbnailAsync(
    LocalPlayer.UserId,
    Enum.ThumbnailType.HeadShot,
    Enum.ThumbnailSize.Size150x150
)

local Window = WindUI:CreateWindow({
    Title = "<font color='rgb(186, 85, 211)'>Lyra Hub Admin</font>",
    Icon = "shield",
    Author = "By Kayrus999 and Rick",
    Folder = "LyraHub",
    Size = UDim2.fromOffset(500, 460),
    MinSize = Vector2.new(740, 400),
    MaxSize = Vector2.new(820, 460),
    Transparent = true,
    Theme = "Ultra Glass V2",
    Resizable = false,
    SideBarWidth = 165,
    BackgroundImageTransparency = 0.3,
    HideSearchBar = false,
    ScrollBarEnabled = false,
    
    Background = "rbxassetid://101614251079837",
    
    User = {
        Enabled = true,
        Title = LocalPlayer.Name,
        Avatar = Avatar,
    },
})

Window:SetToggleKey(Enum.KeyCode.H)
Window:ToggleTransparency(true)

Window:EditOpenButton({
    Title = "LYRA HUB ADMIN",
    Icon = "shield",
    CornerRadius = UDim.new(0, 18),
    StrokeThickness = 1,
    Color = ColorSequence.new(
        Color3.fromRGB(186, 85, 211),
        Color3.fromRGB(186, 85, 211)
    ),
    Enabled = true,
    Draggable = true,
})

local dropdownsToUpdate = {}
local selectedTargetName = nil
local isUpdatingDropdowns = false

local function getPlayersList()
    local players = {}
    for _, player in ipairs(Players:GetPlayers()) do
        table.insert(players, player.Name)
    end
    table.sort(players)
    return players
end

local function updateAllDropdowns()
    if isUpdatingDropdowns then return end
    isUpdatingDropdowns = true
    
    local newPlayers = getPlayersList()
    
    for _, dropdown in ipairs(dropdownsToUpdate) do
        if dropdown and dropdown.Refresh then
            pcall(function()
                dropdown:Refresh(newPlayers, selectedTargetName or "")
            end)
        end
    end
    
    isUpdatingDropdowns = false
end

local function setupAutoUpdate()
    -- Quando um jogador entra
    Players.PlayerAdded:Connect(function(player)
        task.wait(0.3)
        updateAllDropdowns()
    end)
    
    -- Quando um jogador sai
    Players.PlayerRemoving:Connect(function(player)
        task.wait(0.3)
        local newPlayers = getPlayersList()
        updateAllDropdowns()
        
        if player.Name == selectedTargetName then
            selectedTargetName = nil
        end
    end)
    
    -- Atualização periódica a cada 30 segundos como fallback
    task.spawn(function()
        while task.wait(30) do
            updateAllDropdowns()
        end
    end)
end

local TabComandos = Window:Tab({ Title = "Comandos", Icon = "terminal", Locked = false })
local Section = TabComandos:Section({ Title = "Administração", Icon = "user-cog", Opened = true })

local TargetName
local Dropdown = Section:Dropdown({
    Title = "Selecionar Jogador",
    Values = getPlayersList(),
    Value = "",
    Callback = function(opt)
        if opt then
            TargetName = opt
            selectedTargetName = opt
        end
    end
})

table.insert(dropdownsToUpdate, Dropdown)

local TabJumpscare = Window:Tab({ Title = "Jumpscare", Icon = "skull", Locked = false })
local SectionJumpscare = TabJumpscare:Section({ Title = "Jumpscares Terror", Icon = "ghost", Opened = true })

local JumpscareTargetName
local JumpscareDropdown = SectionJumpscare:Dropdown({
    Title = "Selecionar Jogador",
    Values = getPlayersList(),
    Value = "",
    Callback = function(opt)
        if opt then
            JumpscareTargetName = opt
            selectedTargetName = opt
        end
    end
})

table.insert(dropdownsToUpdate, JumpscareDropdown)

-- Iniciar o sistema de atualização automática
setupAutoUpdate()

local function EnviarBoard(cmd, target)
    if not target or target == "" then
        BoardRemote:FireServer(
            "ReturningBoardName",
            BoardCount,
            ";" .. cmd
        )
    else
        BoardRemote:FireServer(
            "ReturningBoardName",
            BoardCount,
            ";" .. cmd .. " " .. target:lower()
        )
    end
end

local comandos = {
    "kill", "kick", "fling", "backrooms", "freeze", "unfreeze",
    "jail", "unjail", "explode", "bring", "tptroll", "float", 
    "lag", "castigo", "descastigo", "loopkill", "unloopkill", 
    "loopbring", "unloopbring", "flopparain", "sit", "loopsit", 
    "unloopsit", "fire", "loopfire", "unloopfire", "goner"
}

for _, cmd in ipairs(comandos) do
    Section:Button({
        Title = "/" .. cmd:lower(),
        Desc = "Comando: /"..cmd.." [jogador]",
        Callback = function()
            if TargetName and TargetName ~= "" then
                EnviarBoard(cmd, TargetName)
            end
        end
    })
end

Section:Space()

Section:Button({
    Title = "/verifique",
    Desc = "Comando: /verifique - Outros Lyra Users enviam código",
    Callback = function()
        EnviarBoard("verifique")
    end
})

local jumpscares = {
    { name = "jumps1", desc = "Jumpscare 1 - Imagem assustadora" },
    { name = "jumps2", desc = "Jumpscare 2 - Terror clássico" },
    { name = "jumps3", desc = "Jumpscare 3 - Sustos intensos" },
    { name = "jumps4", desc = "Jumpscare 4 - Horror máximo" },
    { name = "therakejumpscare", desc = "The Rake Jumpscare" }
}

for _, jumpscare in ipairs(jumpscares) do
    SectionJumpscare:Button({
        Title = "/" .. jumpscare.name,
        Desc = jumpscare.desc,
        Callback = function()
            if JumpscareTargetName and JumpscareTargetName ~= "" then
                EnviarBoard(jumpscare.name, JumpscareTargetName)
            end
        end
    })
end

local sound = Instance.new("Sound")
sound.SoundId = "rbxassetid://8486683243"
sound.Volume = 0.5
sound.PlayOnRemove = true
sound.Parent = Workspace
sound:Destroy()
